function HorizontalScroller(t){this.scrollbox=t,this.scrollImages=this.scrollbox.find("button"),this.leftScrollControl=this.scrollbox.siblings(".left-scroll"),this.rightScrollControl=this.scrollbox.siblings(".right-scroll"),this.scrollbox.on("scroll",this.evaluateControlVisibility.bind(this))}HorizontalScroller.prototype={scrollboxWidth:function(){return this.scrollbox.outerWidth(!0)},currentScrollPosition:function(){return this.scrollbox.scrollLeft()},currentRightPosition:function(){return this.currentScrollPosition()+this.scrollboxWidth()-this.totalWidths()},imageWidths:function(){return $.map(this.scrollImages,(function(t){return $(t).outerWidth(!0)}))},totalWidths:function(){return this.imageWidths().reduce((function(t,i){return t+i}))},avgWidth:function(){return this.totalWidths()/this.imageWidths().length},imagesAcross:function(){return Math.round(this.scrollboxWidth()/this.avgWidth())},imageOffsets:function(){return $.map(this.scrollImages,(function(t){return Math.round($(t).position().left)}))},indexOfFirst:function(t,i){var o;i=i||0;for(var r=0;void 0===o&&t.length>r;)t[r]>=i&&(o=r),r+=1;return o},firstVisibleImageIndex:function(){return this.indexOfFirst(this.imageOffsets())},firstVisibleImage:function(){return this.scrollImages[this.firstVisibleImageIndex()]},lastVisibleImageIndex:function(){return this.firstVisibleImageIndex()+this.imagesAcross()},lastVisibleImage:function(){return this.scrollImages[this.lastVisibleImageIndex()]},offset:function(){var t=$(this.firstVisibleImage()).position().left;return Math.round(t)},nextScrollPosition:function(t){var i=this.currentScrollPosition()+this.offset();switch(t){case"left":i-=this.scrollboxWidth(),$(this.firstVisibleImage()).outerWidth(!0)-this.offset()<0&&(i-=$(this.firstVisibleImage()).outerWidth(!0));break;case"right":i+=this.scrollboxWidth(),this.offset()>0&&(i-=$(this.firstVisibleImage()).outerWidth(!0))}return i},animateScroll:function(t){resetFocusedImg();var i=this;setTimeout(function(){i.scrollbox.animate({scrollLeft:i.nextScrollPosition(t)},this.scrollboxWidth())}.bind(this),100)},hideScrollControl:function(t){t.addClass("invisible")},showScrollControl:function(t){t.removeClass("invisible")},scrollControlVisibility:function(t){return t.hasClass("invisible")},scrollAtZero:function(){return 0==this.currentScrollPosition()},scrollAtMax:function(){return this.currentRightPosition()>=-1},evaluateControlVisibility:function(){var t=this.leftScrollControl,i=this.rightScrollControl,o=this.scrollControlVisibility(t),r=this.scrollControlVisibility(i);this.scrollAtZero()&&this.hideScrollControl(t),this.scrollAtMax()&&this.hideScrollControl(i),!this.scrollAtZero()&&o&&this.showScrollControl(t),!this.scrollAtMax()&&r&&this.showScrollControl(i)}};var scrollers={};function detectScrollers(){return $.map($(".horiz-scroll"),(function(t){return $(t).attr("id")}))}function mapScrollers(t){t.forEach((function(t,i,o){var r="#"+t+" .scroll-images";scrollers[t]=new HorizontalScroller($(r))}))}function getScrollDirection(t){return t.hasClass("left-scroll")?"left":"right"}function triggerAnimation(t){var i=t.closest(".horiz-scroll").attr("id"),o=getScrollDirection(t);scrollers[i].animateScroll(o)}function listenForScroll(){$(".left-scroll, .right-scroll").on("click",(function(){triggerAnimation($(this))}))}function resetFocusedImg(){$(".focused").removeClass("focused")}var horizontalScrollImg=$(".horiz-scroll .scroll-images button");function scrollerInit(){mapScrollers(detectScrollers()),listenForScroll()}horizontalScrollImg.on("click",(function(){$(this).hasClass("focused")||resetFocusedImg(),$(this).toggleClass("focused")})),scrollerInit();